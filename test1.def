Bootstrap: library
From: ubuntu:20.04

%post
    apt-get update && apt-get install -y \
        cmake \
        mpich \
        && apt-get clean

    mkdir -p /opt/matrix_multiplication
    
    cp -r /src /opt/matrix_multiplication
    cp -r /include /opt/matrix_multiplication

    # cpp main.cpp -o matrix_multiplication

    mkdir -p build && cd build

    cmake ..

    cmake --build .

%environment
    # Set environment variables
    export PATH=/opt/matrix_multiplication/build:$PATH

%runscript
    # Define the run script
    exec /opt/matrix_multiplication/build/test_multiplication "$@"